## 
### 当前线上结果

**不考虑时序的lightgbm建模**:
- 任务一: 0.12
- 任务二: 0.26

虽然没能超过规则法，但是改进空间很大。如果加入时序特征效果能够大大提升！

**数据规律/一定的规则**:
- 任务一: 0.09
- 任务二: 0.23

**LSTM的方法**：

- 任务一: 0.9
- 任务二: 1.2

### EDA的一些简单的结论

**以年为单位进行分析**

**对于A**：
- 可以看到18/10--18/11月增加了(59.1890-54.6016)/54.6016=8.4%
- 可以看到19/10--19/11月增加了(46.6275-44.9047)/44.9047=3.8%

**对于B**:
- 可以看到18/10--18/11月增加了(12.88-11.72)/11.72=9.9%
- 可以看到19/10--19/11月增加了(3.793-3.625)/3.625=4.6%

18-19年**月份之间的趋势变化基本一致**，20年因为疫情影响，数值的绝对值在变化，但是趋势并未变化，如果以年份来看的话周期性十分明显。

**分析18/19两年11月份的每一天的趋势**

- 如果只看day和amount的趋势，18/19各自11月份的变化趋势和天数之间关系其实不大

- 但通过分析WKD_TYP_CD可以明显看到，11月份只有两种 WKD_TYP_CD:WN/SN，当为WN时，业务量明显高于SN.这也是符合常识的

- 20年11月份的WKD_TYP_CD也只有WN/SN两种情形，所以我们着重需要考虑WN和SN对amount的影响

### 基于LSTM的一些建模思路的分享

虽然LSTM**远不如直接利用数据规律+一定的规则来做**；但这里还是给出基于LSTM的代码以供参考，但不建议使用，只是为了给那些还不会利用LSTM建模时序问题的伙伴参考以下，感觉这个方法还是有潜力

**LSTM的建模思路**

- 不如就让输入序列长度为30 day,需要预测的长度也为30 day. 序列-->>序列
- 序列中每一个输入的维度(即我们构造的特征):[ amount，month，day,WKD_TYP_CD)
- 用1月份预测2月；2月预测3月.....10月就预测11月
- 为了充分利用WKD_TYP_CD特征，因为这个特征太重要了，所以可以在解码的时候将该特征embedding进去

**举例**:
- LSTM的输入是9月份的30天amount值，以及这30天的month,day,WKD_TYP_CD特征
- LSTM的输出是10月份的30天的amount值
- 在LSTM解码的时候将10月份的WKD_TYP_CD特征embedding到网络里面和编码器的输出结合。

最后，祝愿大家取得好成绩！！